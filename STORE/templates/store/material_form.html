{% extends "main/index.html" %}

{% block maincontent %}
<div class="max-w-lg mx-auto mt-10 bg-white p-6 rounded-lg shadow-md">
  <h2 class="text-2xl font-bold mb-6">
    {% if view.object %}Edit Dispatch Plan{% else %}New Dispatch Plan{% endif %}
  </h2>

  <form method="post" class="space-y-5">
    {% csrf_token %}

    {# Global (non-field) errors #}
    {% if form.non_field_errors %}
      <div class="rounded bg-red-100 text-red-800 px-4 py-3">
        {{ form.non_field_errors }}
      </div>
    {% endif %}

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      {# Type #}
      <div>
        {{ form.type.label_tag }}
        {{ form.type }}
        {% if form.type.errors %}
          <p class="mt-1 text-sm text-red-600">{{ form.type.errors.0 }}</p>
        {% endif %}
      </div>

      {# Tentative Date #}
      <div>
        {{ form.tentative_date.label_tag }}
        {{ form.tentative_date }}
        {% if form.tentative_date.errors %}
          <p class="mt-1 text-sm text-red-600">{{ form.tentative_date.errors.0 }}</p>
        {% endif %}
      </div>
    </div>

    {# Material Name (full width) #}
    <div>
      {{ form.material_name.label_tag }}
      {{ form.material_name }}
      {% if form.material_name.errors %}
        <p class="mt-1 text-sm text-red-600">{{ form.material_name.errors.0 }}</p>
      {% endif %}
    </div>

    {# Trade Name (full width) #}
    <div>
      {{ form.trade_name.label_tag }}
      {{ form.trade_name }}
      {% if form.trade_name.errors %}
        <p class="mt-1 text-sm text-red-600">{{ form.trade_name.errors.0 }}</p>
      {% endif %}
    </div>

    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
      {# Unit #}
      <div>
        {{ form.unit.label_tag }}
        {{ form.unit }}
        {% if form.unit.help_text %}
          <p class="mt-1 text-xs text-gray-500">{{ form.unit.help_text }}</p>
        {% endif %}
        {% if form.unit.errors %}
          <p class="mt-1 text-sm text-red-600">{{ form.unit.errors.0 }}</p>
        {% endif %}
      </div>

      {# Quantity #}
      <div>
        {{ form.qty.label_tag }}
        {{ form.qty }}
        {% if form.qty.errors %}
          <p class="mt-1 text-sm text-red-600">{{ form.qty.errors.0 }}</p>
        {% endif %}
      </div>
    </div>

    {# Form buttons #}
    <div class="flex justify-end space-x-4 pt-4 border-t">
      <button type="submit"
        class="px-5 py-2 bg-indigo-600 text-white rounded-md shadow hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500">
        Save
      </button>
      <a href="{% url 'material-list' %}"
        class="px-5 py-2 border border-gray-300 rounded-md shadow-sm text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-indigo-500">
        Cancel
      </a>
    </div>
  </form>
</div>
{% endblock %}
